{
    email {$WEB_MAIL:-admin@example.de}
}

(site_common) {
    root * /srv
    encode zstd gzip
    file_server browse

    @jsonfiles {
        path /data/*.json
    }
    header @jsonfiles Content-Type application/json

    header {
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
        X-Content-Type-Options "nosniff"
        Referrer-Policy "no-referrer"
    }
}

# Lokale Entwicklung (nur lokal, anderer Port)
# HTTP:
localhost:8080, 127.0.0.1:8080 {
    import site_common
}
# Optional HTTPS intern:
# localhost:8443, 127.0.0.1:8443 {
#     tls internal
#     import site_common
# }

# Produktion (Ã¶ffentlich, 80/443)
{$WEB_DOMAIN} {
    import site_common
    # tls { ... }  # optional ACME-Tuning
}
